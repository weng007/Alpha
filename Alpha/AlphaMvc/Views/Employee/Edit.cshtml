@{
    ViewBag.Title = "Edit";
}

<h2>Technician Edit</h2>
<table>
    <tr>
        <td>
            @Html.ActionLink("Teachnician List", "Index")
        </td>
    </tr>
</table>
@*<br />*@
@* -------------------------------------- modal dialog-------------------------------- *@
<link href="@Url.Content("~/Content/editable/tablestyle.css")" rel="stylesheet" type="text/css" />
@* -------------------------------------- modal dialog ------------------------------- *@
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>
<script src="@Url.Content("~/Scripts/EditableGrid/jquery.dynotable.js")" type="text/javascript"></script>
@* ------------------------------------- tab bar ---------------------------------------- *@

<link href="@Url.Content("~/Content/Tab/easy-responsive-tabs.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/Tab/easyResponsiveTabs.js")" type="text/javascript"></script>

@* -------------------------------------------------------------------------------------- *@

<script type="text/javascript">

            hljs.tabReplace = '    '; // 4 spaces
            hljs.initHighlightingOnLoad();


            $(document).ready(function () {
                $("#datepicker").datepicker();
                $('#t1').dynoTable();
                $('#t2').dynoTable2();
            });

</script>

@*<br />*@
@* -------------------------------------- modal dialog-------------------------------- *@

@* -------------------------------------- modal dialog ------------------------------- *@
<div id="myModal">
    @using (Html.BeginForm())
    {
        <form>
            <ul class="form-style">
                <li>
                    <label>TechnicianID<span class="required">*</span></label>
                    <input type="text" name="field1" class="field-divided" placeholder="T0008" disabled />&nbsp;<input type="text" name="field2" class="field-divided" placeholder="HR Code" disabled/>
                </li>

                <li>
                    <label>ชื่อ - นามสกุล</label>
                    <input type="text" name="field1" class="field-divided" placeholder="ชื่อ" disabled />&nbsp;<input type="text" name="field2" class="field-divided" placeholder="นามสกุล" disabled/>
                </li>
                <li>
                    <label>ประเภทพนักงาน</label>
                    <select name="field4" class="field-select-medium" disabled>
                        <option value="Advertise">พนักงานประจำ</option>
                        <option value="Partnership">พนักงานชั่วคราว</option>
                    </select>
                    &nbsp;<input type="text" name="field2" class="field-divided" placeholder="เลขบัตรประชาชน" disabled />
                </li>
                <li><label class="label-big-2">Position</label>&nbsp;<label class="label-small">เกรด</label></li>
                <li>
                    <input type="text" name="field2" class="field-divided" placeholder="Position" disabled />&nbsp;<select name="field4" class="field-select-small-2" disabled>
                        <option value="Advertise">A</option>
                        <option value="Partnership">B</option>
                        <option value="Partnership">C</option>
                        <option value="Partnership">D</option>
                    </select>
                </li>
                @*<li>
                        <lable>Enter Employee Id:</lable>
                        <input type="text" id="txtEmpid" class="field-divided" placeholder="EmployeeID" />
                        <button onclick="GetAllEmployees();return false;">Get All Employees</button>
                    </li>*@
                <br />
            </ul>
            @* ------------------------------------------- tabbar ------------------------------------- *@
            @* ---------------------------------------------------------------------------------------------------------- *@
            <table class="tabbar">
                <tr>
                    <td>
                        <div id="container">
                            <div id="parentHorizontalTab">
                                <ul class="resp-tabs-list hor_1">
                                    <li>Card</li>
                                    <li>Skill</li>
                                    <li>Attach File</li>
                                </ul>
                                <div class="resp-tabs-container hor_1">
                                    <div>
                                        <div class="grigbar">
                                            @*<a href="/JobOrder/Create"><img src="@Url.Content("~/images/btnNew.jpg")" alt="IMAGES" /></a>*@
                                            <table id="example" class="display" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th>No.</th>
                                                        <th>บริษัท</th>
                                                        <th>ประเภทบัตร</th>
                                                        <th>วันออกบัตร</th>
                                                        <th>วันหมดอายุ</th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>1</td>
                                                        <td>บริษัท1</td>
                                                        <td>ประเภท1</td>
                                                        <td>17/12/2015</td>
                                                        <td>17/12/2016</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>2</td>
                                                        <td>หจก.1</td>
                                                        <td>ประเภท2</td>
                                                        <td>17/12/2015</td>
                                                        <td>17/12/2016</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>3</td>
                                                        <td>หจก.2</td>
                                                        <td>ประเภท3</td>
                                                        <td>17/12/2015</td>
                                                        <td>17/12/2016</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>4</td>
                                                        <td>บริษัท2</td>
                                                        <td>ประเภท4</td>
                                                        <td>17/12/2015</td>
                                                        <td>17/12/2016</td>
                                                        
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="grigbar">
                                            @*<a href="/JobOrder/Create"><img src="@Url.Content("~/images/btnNew.jpg")" alt="IMAGES" /></a>*@
                                            <table id="example2" class="display" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th>No.</th>
                                                        <th>Skill</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>1</td>
                                                        <td>Skill1</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>2</td>
                                                        <td>Skill2</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>3</td>
                                                        <td>Skill3</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>4</td>
                                                        <td>Skill4</td>
                                                        
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="grigbar">
                                            <table id="example3" class="display" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th>No.</th>
                                                        <th>File Name</th>
                                                        <th>Doc Type</th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>1</td>
                                                        <td>File1</td>
                                                        <td>ประเภท1</td>
                                                    </tr>
                                                    <tr>
                                                        <td>2</td>
                                                        <td>File2</td>
                                                        <td>ประเภท2</td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td>3</td>
                                                        <td>File3</td>
                                                        <td>ประเภท3</td>
                                                    </tr>
                                                    <tr>
                                                        <td>4</td>
                                                        <td>File4</td>
                                                        <td>ประเภท4</td>
                                                        
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>

            @*<ul class="form-style">
                <li>
                    <input type="submit" value="Save" />
                </li>
            </ul>*@

            @* ------------------------------------------- tabbar ------------------------------------- *@
        </form>

    }
</div>
<link href="@Url.Content("~/Content/table/jquery-ui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/jquery.dataTables.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("https://cdn.datatables.net/buttons/1.2.3/css/buttons.jqueryui.min.css")" rel="stylesheet" type="text/css" />
@*<script src="@Url.Content("https://code.jquery.com/jquery-1.12.4.js")" type="text/javascript"></script>*@
<script src="@Url.Content("https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.datatables.net/buttons/1.2.3/js/buttons.html5.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.datatables.net/buttons/1.2.3/js/buttons.print.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.datatables.net/buttons/1.2.3/js/buttons.colVis.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.dataTables.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.datatables.net/1.10.13/js/dataTables.jqueryui.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.datatables.net/buttons/1.2.3/js/dataTables.buttons.min.js")" type="text/javascript"></script>
<script src="@Url.Content("https://cdn.datatables.net/buttons/1.2.3/js/buttons.jqueryui.min.js")" type="text/javascript"></script>

<script>
    $(document).ready(function () {

        $('#parentHorizontalTab').easyResponsiveTabs({
            type: 'default', //Types: default, vertical, accordion
            width: 'auto', //auto or any width like 600px
            fit: true, // 100% fit in a container
            tabidentify: 'hor_1', // The tab groups identifier
            activate: function (event) { // Callback function if tab is switched
                var $tab = $(this);
                var $info = $('#nested-tabInfo');
                var $name = $('span', $info);
                $name.text($tab.text());
                $info.show();
            }
        });

            var table = $('#example').DataTable({
                lengthChange: false
            });

            var table2 = $('#example2').DataTable({
                lengthChange: false
            });

            var table3 = $('#example3').DataTable({
                lengthChange: false
            });

            table.buttons().container()
                .insertBefore('#example_filter');
    });

    var date = new Date();

    var day = date.getDate();
    var month = date.getMonth() + 1;
    var year = date.getFullYear();

    if (month < 10) month = "0" + month;
    if (day < 10) day = "0" + day;

    var today = year + "-" + month + "-" + day;


    document.getElementById('theDate').value = today;
    document.getElementById('theDate1').value = today;
    document.getElementById('theDate2').value = today;
    document.getElementById('theDate3').value = today;



    //--------------------------------------------------------
    function GetAllEmployees() {
        jQuery.support.cors = true;
        $.ajax({
            url: 'http://localhost:24655/api/Product/',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                WriteResponse(data);
                console.log(data);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function AddEmployee() {
        jQuery.support.cors = true;
        var employee = {
            ID: $('#txtaddEmpid').val(),
            EmpName: $('#txtaddEmpName').val(),
            EmpDepartment: $('#txtaddEmpDep').val(),
            EmpMobile: $('#txtaddEmpMob').val()
        };

        $.ajax({
            url: 'http://localhost:8080/API_SVC/api/EmployeeAPI',
            type: 'POST',
            data: JSON.stringify(employee),
            contentType: "application/json;charset=utf-8",
            success: function (data) {
                WriteResponse(data);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function DeleteEmployee() {
        jQuery.support.cors = true;
        var id = $('#txtdelEmpId').val()

        $.ajax({
            url: 'http://localhost:8080/API_SVC/api/EmployeeAPI/' + id,
            type: 'DELETE',
            contentType: "application/json;charset=utf-8",
            success: function (data) {
                WriteResponse(data);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }

    function WriteResponse(employees) {
        var strResult = "<table><th>EmpID</th><th>Emp Name</th><th>Emp Department</th><th>Mobile No</th>";
        $.each(employees, function (index, employee) {
            strResult += "<tr><td>" + employee.ID + "</td><td> " + employee.EmpName + "</td><td>" + employee.EmpDepartment + "</td><td>" + employee.EmpMobile + "</td></tr>";
        });
        strResult += "</table>";
        $("#divResult").html(strResult);
    }

    function ShowEmployee(employee) {
        if (employee != null) {
            var strResult = "<table><th>EmpID</th><th>Emp Name</th><th>Emp Department</th><th>Mobile No</th>";
            strResult += "<tr><td>" + employee.ID + "</td><td> " + employee.EmpName + "</td><td>" + employee.EmpDepartment + "</td><td>" + employee.EmpMobile + "</td></tr>";
            strResult += "</table>";
            $("#divResult").html(strResult);
        }
        else {
            $("#divResult").html("No Results To Display");
        }
    }

    function GetEmployee() {
        jQuery.support.cors = true;
        var id = $('#txtEmpid').val();
        $.ajax({
            url: 'http://localhost:8080/API_SVC/api/EmployeeAPI/' + id,
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                ShowEmployee(data);
            },
            error: function (x, y, z) {
                alert(x + '\n' + y + '\n' + z);
            }
        });
    }
    //--------------------------------------------------------
</script>
@{

            if (ViewData["result"] != "" && ViewData["result"] != null)
            {
                ViewData["result"] = null;
        <script type="text/javascript" language="javascript">
                    alert("Data saved Successfully");
        </script>
    }
}