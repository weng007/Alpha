@model AlphaMvc.Models.MasterExpense
@{
    ViewBag.Title = "Edit";
}

<h2>Master Expense Edit</h2>
<link href="@Url.Content("~/Content/editable/tablestyle.css")" rel="stylesheet" type="text/css" />
@* -------------------------------------- dynotable ------------------------------- *@
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>
<script src="@Url.Content("~/Scripts/EditableGrid/jquery.dynotable.js")" type="text/javascript"></script>
@* ------------------------------------- tab bar ---------------------------------------- *@

<link href="@Url.Content("~/Content/Tab/easy-responsive-tabs.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/Tab/easyResponsiveTabs.js")" type="text/javascript"></script>
<div id="myModal">
    @using (Html.BeginForm())
    {
        <form>
            <ul class="form-style">
                <li>
                    @Html.LabelFor(a => a.Detail)
                    @Html.TextBoxFor(a => a.Detail, new { id = "Detail" })
                    @Html.ValidationMessageFor(a => a.Detail)
                </li>
            </ul>
            <ul class="form-style">
                <li>
                    <input type="submit" value="Save" id="Update" />
                </li>
            </ul>
        </form>

    }
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var dataObject = { ID: 2 };
        $.ajax(
       {
           url: 'http://localhost:13131/api/MasterExpense/Get',
           type: 'GET',
           data: dataObject,
           datatype: 'json',
           success: function (data) {
               data = JSON.parse(data);
               $("#Detail").val(data[0].Detail);
           },
           error: function (msg) {
               alert(msg)
           }
       });
        
    });

    $("#Update").click(function () {
        var dataObject = { ID: 2, Detail: $("#Detail").val() };
        console.log(dataObject);
        $.ajax(
        {
            url: 'http://localhost:13131/api/MasterExpense/Put',
            type: 'PUT',
            data: dataObject,
            datatype: 'json',

            success: function (result) {
                if (result.toString() == "Success") {
                    alert(result)
                }
                else {
                    alert(result)
                }
            },
            error: function (result) {
                alert(result)
            }
        });
    });

</script>