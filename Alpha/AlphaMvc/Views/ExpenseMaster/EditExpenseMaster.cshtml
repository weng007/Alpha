@model AlphaMvc.Models.ExpenseMaster
@{
    ViewBag.Title = "EditExpenseMaster";
}

<h2>Master Expense Edit</h2>
<link href="@Url.Content("~/Content/editable/tablestyle.css")" rel="stylesheet" type="text/css" />

    @using (Html.BeginForm())
    {
        <form>
            <ul class="form-style">
                <li>
                    @Html.LabelFor(a => a.Detail)
                    @Html.TextBoxFor(a => a.Detail, new { id = "Detail" })
                    @Html.ValidationMessageFor(a => a.Detail)
                </li>
            </ul>
            <ul class="form-style">
                <li>
                    <input type="submit" value="Save" id="Update" />
                </li>
            </ul>
        </form>

    }

<script type="text/javascript">

    $(document).ready(function () {
        var id= @Request.Params["id"];
        //alert('Round2');
        $.ajax(
       {
           url: 'http://localhost:13131/api/ExpenseMaster/'+id,
           type: 'GET',
           datatype: 'json',
           success: function (data) {
               data = JSON.parse(data);
               $("#Detail").val(data.Table[0].Detail);
           },
           error: function (msg) {
               alert(msg);
           }

       });

        $("#Update").click(function () {
            var dataObject = { ID: @Request.Params["id"], Detail: $("#Detail").val() };
            $.ajax(
            {
                url: 'http://localhost:13131/api/ExpenseMaster/PUT',
                type: 'PUT',
                data: dataObject,
                datatype: 'json',

                success: function (result) {
                    alert('Update is completed');
                    top.location.href = "/ExpenseMaster/IndexExpenseMaster";
                }
                ,
                error: function (msg) {
                    alert(msg);
                    top.location.href = "/ExpenseMaster/Index";
                }
            });
        });
    });
</script>